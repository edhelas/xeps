<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE xep SYSTEM 'xep.dtd' [
  <!ENTITY % ents SYSTEM 'xep.ent'>
%ents;
]>
<?xml-stylesheet type='text/xsl' href='xep.xsl'?>
<xep>
<header>
  <title>XMPP Service Administrators</title>
  <abstract>This document defines a method to define administrators for a XMPP Service.</abstract>
  &LEGALNOTICE;
  <number>xxxx</number>
  <status>ProtoXEP</status>
  <type>Standards Track</type>
  <sig>Standards</sig>
  <approver>Council</approver>
  <dependencies>
    <spec>XMPP Core</spec>
    <spec>XEP-0128</spec>
  </dependencies>
  <supersedes/>
  <supersededby/>
  <shortname>N/A</shortname>
  &edhelas;
  <revision>
    <version>0.0.1</version>
    <date>2025-07-31</date>
    <initials>tj</initials>
    <remark><p>Initial version.</p></remark>
  </revision>
</header>
<section1 topic='Introduction' anchor='intro'>
  <p>An XMPP Service administrator might be interested to moderate or manage its own Service from a XMPP entity.</p>
  <p>Until now workarounds were done by XMPP servers to allow the administrators to do so. For example by adding them as owner of all the chatrooms or owner of all the Pubsub nodes managed by their services.</p>
  <p>This document allow an XMPP Service to expose a list of administrators and define how it should handle their interactions.</p>
</section1>
<section1 topic='Business Rules' anchor='bizrules'>
  <p>The administrators are defined as a list of JIDs that can be declared in the Service configuration or by &xep0050; commands. This document doesn't specify how this list is declared or maintained.</p>

  <section2 topic='Discovery' anchor='bizrules-disco'>
    <p>In order to discover whether a XMPP Service entity has an administrators list configured an entity MUST use &xep0030;.</p>

    <p>To make such discovery possible, we specify a &xep0128; mechanism that a server SHOULD return in response to Service discovery information ("disco#info") requests sent to the bare domain of the server. This information MUST be scoped using a FORM_TYPE of "http://jabber.org/network/serverinfo" (as already specified in &xep0128;) and data form fields registered for this purpose as defined in the <link url='#registrar'>XMPP Registrar Considerations</link> section of this document.</p>

    <example caption='Entity queries server for information'><![CDATA[
<iq from='juliet@example.org/chamber'
    to='example.org'
    id='disco1'
    type='get'>
  <query xmlns='http://jabber.org/protocol/disco#info'/>
</iq>
]]></example>
  <example caption='Server communicates information'><![CDATA[
<iq from='example.org'
    to='juliet@example.org/chamber'
    id='disco1'
    type='result'>
  <query xmlns='http://jabber.org/protocol/disco#info'>
    <identity category='server' type='im'/>
    <feature var='http://jabber.org/protocol/disco'/>
    <x xmlns='jabber:x:data' type='result'>
      <field var='FORM_TYPE' type='hidden'>
        <value>http://jabber.org/network/serverinfo</value>
      </field>
      <field var='administrators'>
        <value>alfred@example.org</value>
        <value>admin@example.org</value>
      </field>
    </x>
  </query>
</iq>
]]></example>
  </section2>

  <section2 topic='Service logic' anchor='bizrules-service-logic'>
    <p>An administrator have full administrative access on all the content managed by the Service.</p>
    <p>A &xep0045; Service should consider an administrator as having the same rights as an owner of all the managed rooms.</p>
    <p>A &xep0060; Service should consider an administrator as having the same rights as an owner of all the managed nodes.</p>

    <p>To prevent confusion an administrator SHOULD NOT be listed as owner of a room or a node. However the rooms and nodes SHOULD expose the same features as owners if the entity sends a Service discovery information ("disco#info"). This way the entity can adapt its interface to expose all the administration features.</p>
  </section2>

  <section2 topic='Entity logic' anchor='bizrules-entity-logic'>
    <p>When a JID declared as an administrator is shown or is having interactions in the context of the service, a connected entity SHOULD display it in a distinctive way (eg. a specific icon or color). This way the users are better aware of the moderations or interactions done by the administrators in the service.</p>
  </section2>
</section1>

<section1 topic='Security Considerations' anchor='security'>
  <p>None.</p>
</section1>
<section1 topic='IANA Considerations' anchor='iana'>
  <p>This document requires no interaction with &IANA;.</p>
</section1>
<section1 topic='XMPP Registrar Considerations' anchor='registrar'>
  <p>The &REGISTRAR; includes the following information in its registries.</p>
  <section2 topic='Field Standardization' anchor='registrar-formtype'>
    <p>&xep0068; defines a process for standardizing the fields used within Data Forms qualified by a particular namespace, and &xep0128; describes how to use field standardization in the context of Service discovery. This section registers fields for server information scoped by the "http://jabber.org/network/serverinfo" FORM_TYPE.</p>
    <code caption='Registry Submission'><![CDATA[
<form_type>
  <name>http://jabber.org/network/serverinfo</name>
  <doc>XEP-0157</doc>
  <desc>
    Forms enabling the communication of administrators
    and other server information.
  </desc>
  <field
      var='administrators'
      type='list-multi'
      label='One or more JIDs listing the administrators of the service'/>
</form_type>
]]></code>
  </section2>
</section1>
</xep>
